---
layout: default
---

<style>
  h3 {
    display:none;
  }
  #blogger {
    width: 100%;
    height: 512px;
    border: 0;
  }
  #bar {
    width: 100%;
    clear: both;
  }
  #progress {
    font-size: 16px;
    height: 1.5em;
    width: 0;
    overflow: visible;
    background-color: #dddddd;
  }
  #progress a {
    color: #000000;
  }
  #pl {
    float: right;
    margin-top: -1.5em;
  }
  #playlist {
    width: 100%;
    height: 0px;
    overflow: hidden;
  }
</style>

<h3>Wiki</h3>

<audio id="audio" onended="stopPlayback();">
  <source src="/assets/mp3/nightingale_bird.mp3" type="audio/mpeg">
  <embed src="https://freealise.com/assets/mp3/album.mp3" type="audio/mpeg" height="32" width="256"></embed>
</audio>

    <div id="bar">
      <div id="progress">
        <a href="javascript:if(pb.innerText!='pause'){startPlayback();}else{stopPlayback();}">
          <i id="pb" class="material-icons notranslate">play_arrow</i>
        </a>
      </div>
    </div>
    <a id="pl" href="javascript:showPlaylist();"><i class="material-icons notranslate">queue_music</i></a>
    <div id="playlist"></div>
    <script src='https://www.gstatic.com/charts/loader.js' type='text/javascript'></script>
    <script type="text/javascript">
      var pb = document.getElementById('pb');
      var playlist = document.getElementById('playlist');
      var _t;
      function startPlayback() {
        audio.play();
        pb.innerText = 'pause';
        _t = setInterval(function(){
          var c = parseInt(document.getElementById('audio').currentTime);
          var d = parseInt(document.getElementById('audio').duration);
          document.getElementById('progress').style.width = 100 * c / d + "%"; 
        }, 1000);
      }
      function stopPlayback() {
        audio.pause();
        pb.innerText = 'play_arrow';
        clearInterval(_t);
      }
      function showPlaylist() {
        if (playlist.style.height != '0px') {
          playlist.style.height = '0px';
        } else {
          playlist.style.height = '180px';
        }
      }
      
      var audio = document.getElementById('audio');
      google.charts.load('current', {'packages':['timeline']});
      google.charts.setOnLoadCallback(drawChart);
      function drawChart() {
        var chart = new google.visualization.Timeline(playlist);
        var dataTable = new google.visualization.DataTable();
        
        var options = {
          timeline: { barLabelStyle: { fontName: 'Averia Serif Libre', fontSize: 12 }, showRowLabels: false, singleColor: '#cccccc' },
          hAxis: { format: ' ' }
        };
        var min = 60000;
        var sec = 1000;

        dataTable.addColumn({ type: 'string', id: 'Number' });
        dataTable.addColumn({ type: 'string', id: 'Song' });
        dataTable.addColumn({ type: 'datetime', id: 'Start' });
        dataTable.addColumn({ type: 'datetime', id: 'End' });
        dataTable.addRows([
          [ '1', 'Nightingale', new Date(0), new Date(1*min+39*sec) ],
          [ '2', 'Skylark', new Date(1*min+39*sec),  new Date(2*min+59*sec) ],
          [ '3', 'Parrot', new Date(2*min+59*sec),  new Date(3*min+59*sec) ]
        ]);
   
        function selectHandler() {
          var selectedItem = chart.getSelection()[0];
          if (selectedItem) {
            audio.currentTime = dataTable.getValue(selectedItem.row, 2).getTime() / 1000;
            startPlayback();
          }
        }

        google.visualization.events.addListener(chart, 'select', selectHandler); 
        chart.draw(dataTable, options);
      }
    </script>


<iframe id="blogger" src="" width="100%" height="512"></iframe>

<script>
  var view = '?view=flipcard&m=0';
  var url = 'https://wiki.freealise.com';
  var p = document.location.href.split('?p=');
  if (p[1]) {
    p = p[1].split('#')[0];
    document.getElementById('blogger').src = url + p + view;
  } else {
    document.getElementById('blogger').src = url + "/p/index.html" + view;
  }
</script>
